(function(n,t){"use strict";typeof module!="undefined"&&module.exports?module.exports=t(require("jquery"),require("bootstrap")):typeof define=="function"&&define.amd?define("bootstrap-modal-wrapper-factory",["jquery","bootstrap"],function(n){return t(n)}):n.BootstrapModalWrapperFactory=t(n.jQuery)})(this,function(n){"use strict";function i(t){this.options=n.extend({},r,t);this.defaults=r;this.globalModals=[];this.registerGlobalEventsHandler()}function h(){for(var t="",i,n=0;n<32;n++)i=Math.random()*16|0,(n===8||n===12||n===16||n===20)&&(t+="-"),t+=(n===12?4:n===16?i&3|8:i).toString(16);return t}function t(t,i){this.factory=t;this.options=n.extend(!0,{},{id:u("b-m-w"),title:null,message:null,closable:!1,closeByBackdrop:!0,closeByKeyboard:!0,size:null,onDestroy:null,buttons:[],hiddenButtons:[],dialogClass:null,headerClass:null,bodyClass:null,footerClass:null,localData:{},centered:!1,modalDialogScrollable:!0,modalTitleContainer:"<h3 class='modal-title'><\/h3>",modalButtonContainer:"<button id='' type='button' class='my-1'><\/button>",modalFooterContainer:"<div class='modal-footer d-flex flex-wrap'><\/div>"},i);this.originalModal=null;this.isDestroy=!1;this.isOpen=!1;this.originalContainerId=null;this.originalContainerParent=null}var r={starterZIndex:1e6},u;i.prototype.createModal=function(n){var i=new t(this,n);return this.globalModals.push(i),i.init(),i};i.prototype.createInlinePopup=function(i,r,u,f,e){var s=u?"modal-lg":null,h=n.extend(!0,{},{title:i,elementId:r,message:null,closable:!0,closeByBackdrop:!1,closeByKeyboard:!0,size:s,dialogClass:"custom-modal-dialog",headerClass:"custom-modal-header",bodyClass:"custom-modal-body ",footerClass:null,centered:!1,modalDialogScrollable:f,modalTitleContainer:"<h3 class='modal-title'><\/h3>",modalButtonContainer:"<button id='' type='button' class='my-1'><\/button>",modalFooterContainer:"<div class='modal-footer d-flex flex-wrap'><\/div>"},e),o=new t(this,h);return this.globalModals.push(o),o.init(),(o.options.title===null||o.options.title==="")&&o.generateTitle(),o.show(),o};i.prototype.createPopup=function(i,r,u,f,e){var s=u?"modal-lg":null,h=n.extend(!0,{},{title:i,message:r,closable:!0,closeByBackdrop:!1,closeByKeyboard:!0,size:s,dialogClass:"custom-modal-dialog",headerClass:"custom-modal-header",bodyClass:"custom-modal-body ",footerClass:null,centered:!1,modalDialogScrollable:f,modalTitleContainer:"<h3 class='modal-title'><\/h3>",modalButtonContainer:"<button id='' type='button' class='my-1'><\/button>",modalFooterContainer:"<div class='modal-footer d-flex flex-wrap'><\/div>"},e),o=new t(this,h);return this.globalModals.push(o),o.init(),(o.options.title===null||o.options.title==="")&&o.generateTitle(),o.show(),o};i.prototype.createAjaxPopup=function(t,i,r,u,f){var o=this,e=o.createPopup(t,'<div class="custom-modal-message"><div class="spinner-border float-left"><\/div><div class="float-left ml-3 ">Please wait ...<\/div><\/div>',!1,u,f);return e.show(),n.get(i,function(n){r&&e.updateSize("modal-lg");e.updateMessage(n);(e.options.title===null||e.options.title==="")&&e.generateTitle()}),e};i.prototype.createAjaxModal=function(t){var u=this,r=n.extend(!0,{},{sendId:!0,idParameter:"ajaxModalId",updateSizeAfterDataFetchTo:"modal-lg",ajaxContainerReadyEventName:"ajax-container-ready",ajax:{type:"GET",dataType:"html",url:null,data:{},success:function(t){i.updateSize(r.updateSizeAfterDataFetchTo);i.updateMessage(t);setTimeout(function(){n("#"+i.options.id).trigger(r.ajaxContainerReadyEventName,[i])},0)}}},t),i=u.createModal(r);i.options.sendId&&(i.options.ajax.data[i.options.idParameter]=i.options.id);i.originalModal.removeClass("fade");i.originalModal.find(".modal-dialog").css({transition:"all .3s"});i.originalModal.one("shown.bs.modal",function(){n.ajax(i.options.ajax)});return i.show(),i};var s="<div class='modal fade' id='' tabindex='-1' role='dialog' aria-labelledby='' aria-hidden='true'><div class='modal-dialog' role='document'><div class='modal-content'><\/div><\/div><\/div>",f="<div class='modal-header'><\/div>",e="<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button>",o="<div class='modal-body'><\/div>";return u=function(n){return n+"-"+Math.floor(Math.random()*1e8+1)+"-"+(new Date).getTime()+"-"+h()},t.prototype.generateTemplate=function(){var i,r,t,u;if(this.originalModal=n(s),this.options.elementId&&(this.originalContainerId=this.options.elementId),this.originalModal.attr("id",this.options.id),i=this.originalModal.find(".modal-dialog"),this.options.size&&(this.options.size==="modal-sm"||this.options.size==="modal-lg"||this.options.size==="modal-xl")&&i.addClass(this.options.size),this.options.dialogClass&&i.addClass(this.options.dialogClass),this.options.centered===!0&&i.addClass("modal-dialog-centered"),this.options.modalDialogScrollable===!0&&i.addClass("modal-dialog-scrollable"),(this.options.title||this.options.closable)&&this.originalModal.find(".modal-content").append(f),this.options.title&&this.originalModal.find(".modal-header").append(this.options.modalTitleContainer).find(".modal-title").append(this.options.title),this.options.closable&&this.originalModal.find(".modal-header").append(e),this.options.headerClass&&this.originalModal.find(".modal-header").addClass(this.options.headerClass),this.options.message&&(this.originalModal.find(".modal-content").append(o),this.originalModal.find(".modal-body").html("").append(this.options.message)),this.originalContainerId&&(this.originalModal.find(".modal-content").append(o),r=n(this.originalContainerId),this.originalContainerParent=r.parent(),r.appendTo(this.originalModal.find(".modal-body").html("")),this.options.message=r.html()),this.options.bodyClass&&this.originalModal.find(".modal-body").addClass(this.options.bodyClass),this.options.buttons&&this.options.buttons.length>0)for(this.originalModal.find(".modal-content").append(this.options.modalFooterContainer),t=0;t<this.options.buttons.length;t++)u=this.options.buttons[t],this.addButton(u,!1);if(this.options.hiddenButtons&&this.options.hiddenButtons.length>0)for(t=0;t<this.options.hiddenButtons.length;t++)u=this.options.hiddenButtons[t],this.addHiddenButton(u,!1);this.options.footerClass&&this.originalModal.find(".modal-footer").addClass(this.options.footerClass)},t.prototype.init=function(){this.generateTemplate();var t=this;this.originalModal.on("show.bs.modal",function(i){i.stopPropagation();var r=t.factory.defaults.starterZIndex+10*n(".modal.show").length;n(this).css("z-index",r);setTimeout(function(){n(".modal-backdrop").not(".modal-stack").first().css("z-index",r-1).addClass("modal-stack")},0)}).on("shown.bs.modal",function(){t.isOpen=!0}).on("hide.bs.modal",function(n){t.options.onDestroy&&typeof t.options.onDestroy=="function"&&(t.options.onDestroy.call(t,t)||n.preventDefault())}).on("hidden.bs.modal",function(i){i.stopPropagation();t.destroy();n(".modal.show").length&&n("body").addClass("modal-open")})},t.prototype.destroy=function(){var t=this;this.originalModal.modal("hide").promise().done(function(){var r,i;for(t.originalContainerId&&n(t.originalContainerId).appendTo(t.originalContainerParent).hide(),t.isOpen=!1,n("#"+t.options.id).off("show.bs.modal"),n("#"+t.options.id).off("hidden.bs.modal"),n("#"+t.options.id).modal("dispose"),i=0;i<t.options.buttons.length;i++)r=t.options.buttons[i],r.buttonObject.off();for(t.isDestroy=!0,i=t.factory.globalModals.length;i--;)if(t.factory.globalModals[i].options.id===t.options.id){t.factory.globalModals.splice(i,1);break}n("#"+t.options.id).find(".modal-dialog").off();n("#"+t.options.id).off();n("#"+t.options.id).remove()})},t.prototype.show=function(){var t={show:!0,backdrop:this.options.closeByBackdrop?!0:"static",keyboard:this.options.closeByKeyboard,focus:!0};return this.originalContainerId&&(this.originalContainerParent.append(this.originalModal),n(this.originalContainerId).show()),this.originalModal.modal(t),this},t.prototype.hide=function(){this.originalModal.modal("hide")},t.prototype.updateTitle=function(n){var t,i;return this.options.title=n,t=this.originalModal.find(".modal-title"),t.length===0&&(i=this.originalModal.find(".modal-header"),i.length===0&&(this.originalModal.find(".modal-content").prepend(f),i=this.originalModal.find(".modal-header")),i.prepend(this.options.modalTitleContainer),t=this.originalModal.find(".modal-title")),t.html(n),this.originalModal.modal("handleUpdate"),this},t.prototype.generateTitle=function(){var t,i,r;this.options.title&&this.options.title.length>0||(t=n(this.options.message),i=t.find("h1").hide(),i.length>0&&(r=i.html(),this.updateTitle(r),this.updateMessage(t)))},t.prototype.updateClosable=function(n){var t,i,r;return this.options.closable!==n&&(this.options.closable=n,this.options.closable===!0?(t=this.originalModal.find(".modal-header"),t.length===0&&(this.originalModal.find(".modal-content").prepend(f),t=this.originalModal.find(".modal-header")),t.append(e)):this.options.closable===!1&&(i=this.originalModal.find(".modal-header").find("button.close"),i.off(),i.remove(),r=this.originalModal.find(".modal-header").find(".modal-title"),r.length===0&&this.originalModal.find(".modal-header").remove()),this.originalModal.modal("handleUpdate")),this},t.prototype.updateClosableByBackdrop=function(t){return this.options.closeByBackdrop!==t&&(this.options.closeByBackdrop=t,n("#"+this.options.id).data("bs.modal")._config.backdrop=this.options.closeByBackdrop?!0:"static",this.originalModal.modal("handleUpdate")),this},t.prototype.removeHeader=function(){var t=this.originalModal.find(".modal-header"),n;return t.length>0&&(n=t.find("button.close"),n.length>0&&(n.off(),n.remove(),this.options.closable=!1),t.remove(),this.options.title=null),this.originalModal.modal("handleUpdate"),this},t.prototype.updateMessage=function(n){this.options.message=n;var t=this.originalModal.find(".modal-body");return t.html("").html(n),this.originalModal.modal("handleUpdate"),this},t.prototype.updateSize=function(n){return this.options.size!==n&&(this.options.size=n,this.options.size&&typeof this.options.size!="undefined"&&this.options.size!==null?(this.options.size==="modal-sm"||this.options.size==="modal-lg"||this.options.size==="modal-xl")&&(this.originalModal.find(".modal-dialog").removeClass("modal-xl modal-lg modal-sm"),this.originalModal.find(".modal-dialog").addClass(this.options.size)):this.originalModal.find(".modal-dialog").removeClass("modal-xl modal-lg modal-sm"),this.originalModal.modal("handleUpdate")),this},t.prototype.updateModalDialogScrollable=function(n){if(this.options.modalDialogScrollable!==n){this.options.modalDialogScrollable=n;var t=this.originalModal.find(".modal-dialog");this.options.modalDialogScrollable===!0?t.addClass("modal-dialog-scrollable"):this.options.modalDialogScrollable===!1&&t.removeClass("modal-dialog-scrollable");this.originalModal.modal("handleUpdate")}return this},t.prototype.disableButtons=function(){var n=this.originalModal.find(".modal-footer");n.find("button").prop("disabled",!0)},t.prototype.enableButtons=function(){var n=this.originalModal.find(".modal-footer");n.find("button").prop("disabled",!1)},t.prototype.addButton=function(t,i){var e=this,f=this.originalModal.find(".modal-footer"),o,r;f.length===0&&(this.originalModal.find(".modal-content").append(this.options.modalFooterContainer),f=this.originalModal.find(".modal-footer"));t.id=t.id?t.id:u("modal-button");o=t.template?t.template:e.options.modalButtonContainer;r=n(o);r.attr("id",t.id);r.addClass(t.cssClass?t.cssClass:"");r.append(t.label);t.buttonObject=r;r.on("click",{modalWrapper:e,button:r,buttonData:t},function(n){var i=n.data.modalWrapper,r=n.data.button,t=n.data.buttonData;if(t.action&&typeof t.action=="function")return t.action.call(i,r,t,n)});return i!==!1&&this.options.buttons.push(t),r.appendTo(f)},t.prototype.addHiddenButton=function(t,i){var f=this,o=this.originalModal.find(".modal-header"),e,r;t.id=t.id?t.id:u("modal-button");e=t.template?t.template:f.options.modalButtonContainer;r=n(e);r.attr("id",t.id);r.addClass(t.cssClass?t.cssClass:"");r.addClass("d-none");r.append(t.label);t.buttonObject=r;r.on("click",{modalWrapper:f,button:r,buttonData:t},function(n){var i=n.data.modalWrapper,r=n.data.button,t=n.data.buttonData;if(t.action&&typeof t.action=="function")return t.action.call(i,r,t,n)});return i!==!1&&this.options.buttons.push(t),r.appendTo(o)},t.prototype.setOnDestroy=function(n){this.options.onDestroy=n},t.prototype.removeButton=function(n){for(var i=null,t=this.options.buttons.length;t--;)this.options.buttons[t].id===n&&(i=this.options.buttons[t],i.buttonObject.off(),i.buttonObject.remove(),this.options.buttons.splice(t,1));return this},i.prototype.showMessage=function(t){var i=null;return i=typeof t=="object"&&t.constructor==={}.constructor?n.extend(!0,r,t):n.extend(!0,r,{message:t}),this.createModal(i).show()},i.prototype.createAlert=function(t,i,r,u){var f={title:t,message:i,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,buttons:[{label:"OK",cssClass:"btn btn-primary",action:function(){this.hide();u!=="undefined"&&typeof u=="function"&&u()}}]},e=null;return e=typeof r=="object"&&r.constructor==={}.constructor?n.extend(!0,f,r):n.extend(!0,f,{message:r}),this.createModal(e).show()},i.prototype.alert=function(t){var i={title:"Alert",message:"",closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,buttons:[{label:"OK",cssClass:"btn btn-primary",action:function(){this.hide()}}]},r=null;return r=typeof t=="object"&&t.constructor==={}.constructor?n.extend(!0,i,t):n.extend(!0,i,{message:t}),this.createModal(r).show()},i.prototype.confirm=function(t){var i={title:"Confirm",message:"Are You Sure ?",closable:!1,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"No",cssClass:"btn btn-secondary",action:function(){this.hide();t.onConfirmCancel&&typeof t.onConfirmCancel=="function"&&t.onConfirmCancel()}},{label:"Yes",cssClass:"btn btn-primary",action:function(){this.hide();t.onConfirmAccept&&typeof t.onConfirmAccept=="function"&&t.onConfirmAccept()}}]},r=n.extend({},i,t);return this.createModal(r).show()},i.prototype.registerGlobalEventsHandler=function(){var t=this;n(document).on("show.bs.modal",".modal",function(){var i=t.options.starterZIndex+10*n(".modal.show").length;n(this).css("z-index",i);setTimeout(function(){n(".modal-backdrop").not(".modal-stack").first().css("z-index",i-1).addClass("modal-stack")},0)}).on("hidden.bs.modal",".modal",function(){n(".modal.show").length&&n("body").addClass("modal-open")}).on("inserted.bs.tooltip",function(i){var r=t.options.starterZIndex+10*n(".modal.show").length,u=n(i.target).attr("aria-describedby");n("#"+u).css("z-index",r)}).on("inserted.bs.popover",function(i){var r=t.options.starterZIndex+10*n(".modal.show").length,u=n(i.target).attr("aria-describedby");n("#"+u).css("z-index",r)})},new i});